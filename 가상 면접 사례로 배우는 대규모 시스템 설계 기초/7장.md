# 7장 분산 시스템을 위한 유일 ID 생성기 설계

- auto increment를 사용하는 건?
- 데이터베이스 서버 한 대로는 분산 환경 불가

## 문제 이해 및 설계 범위 확정

- ID는 유일해야 한다
- ID는 숫자로만 구성되어야 한다
- ID는 64비트로 표현 가능해야 한다
- ID는 발급 날짜에 따라 정렬 가능해야 한다
- 초당 10,000개의 ID를 만들 수 있어야 한다

## 개략적 설계안 제시 및 동의 구하기

- 다중 마스터 복제
- UUID
- 티켓 서버
- 트위터 스노플레이크

### 다중 마스터 복제

```
- MySQL1: 1, 3, 5, 7, ... 증가
- MySQL2: 2, 4, 6, 8, ... 증가
```

- auto_increment 기능 활용
- 데이터베이스 서버 개수 k만큼 증가
- ID 유일성 보장
- ID 숫자로만 구성, 64비트 표현 가능, 발급 날짜 정렬 가능
- 서버 개수 늘리기 어렵다 (k씩 늘리다가 k를 변경하기는 어렵다)

### UUID

- UUID: 정보를 유일하게 식별하기 위한 128비트 수
- 32자리 16진수로 표현된다
- RFC4122
- `8-4-4-4-12`
- 웹서버마다 별도의 uuid 생성 가능 -> 규모 확장이 쉽다
- 동기화 이슈가 없다
- ID가 128비트로 길다
- 시간순으로 정렬 불가능하다
- ID에 숫자가 아닌 값이 포함될 수 있다

### 티켓서버

- auto_increment 기능을 가진 티켓 서버 하나만 사용한다
- 구현하기 쉽다
- 



