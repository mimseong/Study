# 6장 키-값 저장소 설계

## 키-값 저장소

- 비관계형 데이터베이스
- 키는 유일해야 한다
- 키: 일반 텍스트 or 해시값
- 짧을수록 좋다
- 값: 문자열 / 리스트 / 객체 ...

## 단일 서버 키-값 저장소

- 모든 데이터를 메모리에 해시 테이블로 저장?
- 빠른 속도를 보장하지만 모든 데이터를 메모리 안에 두는 것이 불가능하다
- 개선책
  - 데이터 압축
  - 자주 쓰이는 데이터만 메모리에 두고 나머지는 디스크에 저장

## 분산 키-값 저장소

- 분산 해시 테이블이라고도 불린다
- 키-값 쌍을 여러 서버에 분산시킨다

### CAP 정리

```
- consistency: 데이터 일관성
  - 어떤 노드에 접속했는지 관계 없이 언제나 같은 데이터를 보게 되어야 한다
- availability: 가용성
  - 일부 노드에 장애가 발생하더라도 항상 응답을 받을 수 있어야 한다
- partition tolerance: 파티션 감내
  - 네트워크에 파티션이 생기더라도 시스템은 계속 동작해야 한다
```

- CAP 정리: 이들 가운데 어떤 두 가지를 충족하려면 나머지 하나는 반드시 희생해야 한다
- CP: 가용성을 희생한다
- AP: 가데이터 일관성을 희생한다
- CA: 네트워크 장애는 피할 수 없는 일이다.... CA 시스템은 존재하지 않는다


